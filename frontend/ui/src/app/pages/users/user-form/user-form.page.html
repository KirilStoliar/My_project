<div class="min-h-screen bg-gray-50 p-6">
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="flex items-center gap-4 mb-6">
      <a routerLink="/users" class="p-2 hover:bg-gray-200 rounded-lg transition">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </a>
      <h1 class="text-3xl font-bold text-gray-900">Add user</h1>
    </div>

    @if (error()) {
    <div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6">
      {{ error() }}
    </div>
    } @if (success()) {
    <div class="bg-green-50 border border-green-200 text-green-800 rounded-lg p-4 mb-6">
      {{ success() }}
    </div>
    }

    <div class="bg-white rounded-lg shadow-sm p-6">
      <form [formGroup]="registerUserForm" (ngSubmit)="submitRegistration()" class="space-y-4">
        <!-- Email -->
        <div>
          <label class="block text-sm font-medium text-slate-700">Email</label>
          <input
            type="email"
            formControlName="email"
            autocomplete="email"
            class="mt-1 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-slate-900 outline-none transition focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10"
            placeholder="admin@example.com"
          />
          @if (registerUserForm.controls.email.touched && registerUserForm.controls.email.invalid) {
          <p class="mt-1 text-xs text-rose-600">Введите корректный email</p>
          }
        </div>

        <!-- Name -->
        <div>
          <label class="block text-sm font-medium text-slate-700">Name</label>
          <input
            type="text"
            formControlName="name"
            autocomplete="name"
            class="mt-1 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-slate-900 outline-none transition focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10"
            placeholder="Ivan"
          />
          @if (registerUserForm.controls.name.touched && registerUserForm.controls.name.invalid) {
          <p class="mt-1 text-xs text-rose-600">Введите имя</p>
          }
        </div>

        <!-- Surname -->
        <div>
          <label class="block text-sm font-medium text-slate-700">Surname</label>
          <input
            type="text"
            formControlName="surname"
            autocomplete="family-name"
            class="mt-1 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-slate-900 outline-none transition focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10"
            placeholder="Ivanov"
          />
          @if (registerUserForm.controls.surname.touched &&
          registerUserForm.controls.surname.invalid) {
          <p class="mt-1 text-xs text-rose-600">Введите фамилию</p>
          }
        </div>

        <!-- Birth date -->
        <div>
          <label class="block text-sm font-medium text-slate-700">Birth date</label>
          <input
            type="date"
            formControlName="birthDate"
            class="mt-1 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-slate-900 outline-none transition focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10"
          />
          @if (registerUserForm.controls.birthDate.touched &&
          registerUserForm.controls.birthDate.invalid) {
          <p class="mt-1 text-xs text-rose-600">
            @if (registerUserForm.controls.birthDate.errors?.['dateNotBeforeToday']) { Дата рождения
            должна быть раньше сегодняшнего дня } @else { Введите корректную дату }
          </p>
          }
        </div>

        <!-- Password -->
        <div>
          <label class="block text-sm font-medium text-slate-700">Password</label>
          <input
            type="password"
            formControlName="password"
            autocomplete="new-password"
            class="mt-1 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-slate-900 outline-none transition focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10"
            placeholder="********"
          />
          @if (registerUserForm.controls.password.touched &&
          registerUserForm.controls.password.invalid) {
          <p class="mt-1 text-xs text-rose-600">Введите пароль</p>
          }
        </div>

        <!-- Role -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Role</label>

          <div class="flex gap-6">
            <label class="flex items-center gap-2 text-slate-900">
              <input type="radio" formControlName="role" value="ADMIN" class="h-4 w-4" />
              <span>ADMIN</span>
            </label>

            <label class="flex items-center gap-2 text-slate-900">
              <input type="radio" formControlName="role" value="USER" class="h-4 w-4" />
              <span>USER</span>
            </label>
          </div>

          @if (registerUserForm.controls.role.touched && registerUserForm.controls.role.invalid) {
          <p class="mt-1 text-xs text-rose-600">Выберите роль</p>
          }
        </div>

        <!-- Actions -->
        <div class="pt-2">
          <button
            type="submit"
            [disabled]="registerUserForm.invalid || isSubmitting()"
            class="flex w-full justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50"
          >
            Create
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
